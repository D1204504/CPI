<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>CPI</title>
    <meta name="keywords" content="">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/style.css">
    <style>
        .banner_main, .footer {
            background: #f8f9fa; /* assuming this is the background color you want */
        }

        .sidebar {
            position: fixed;
            right: -300px;
            top: 0;
            width: 300px;
            height: 100%;
            background-color: #f8f9fa;
            box-shadow: -2px 0 5px rgba(0,0,0,0.1);
            padding: 20px;
            overflow-y: auto;
            z-index: 1000;
            transition: right 0.3s ease; /* Smooth slide-in effect */
        }
        .sidebar.open {
            right: 0; /* Slide the sidebar into view */
        }
        .toggle-button {
            position: fixed;
            right: 10px;
            top: 10px;
            z-index: 1100;
            background-color: #97000f;
            color: white;
            border: none;
            padding: 10px 20px;
            cursor: pointer;
        }
         .feedback-table {
            width: 100%;
            border-collapse: collapse;
        }

        .feedback-table th, .feedback-table td {
            border: 1px solid #ddd;
            padding: 8px;
        }

        .feedback-table th {
            background-color: #f2f2f2;
            text-align: left;
        }

        #feedback-form {
            margin-top: 20px;
        }

        .cpi-images {
            display: flex;
            justify-content: space-around;
            background-color: #fff;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }

        .cpi-images img {
            max-width: 150px;
            height: auto;
            display: block;
            margin-bottom: 10px;
        }

        .cpi-images div {
            text-align: center;
        }

        .cpi-images p {
            margin: 0;
        }
        .cpi-image-container {
            text-align: center;
            margin-top: 20px;
        }

        .cpi-image-container img {
            max-width: 500px; /* Adjust this value to resize the image */
            height: auto;
            display: inline-block;
            transition: transform 0.3s ease; /* Smooth transition for the transform property */
        }

        .cpi-image-container img:hover {
            transform: scale(2.5); /* Scale the image to 1.2 times its original size on hover */
        }

        .food_box img {
            transition: transform 0.3s ease;
            display: block; /* 确保图片作为块级元素显示 */
            margin: 0 auto; /* 让图片水平居中 */
        }

        .food_box img:hover {
            transform: scale(5); /* 缩放图片 */
        }

        .cpi-image-container button {
            margin-top: 10px;
            display: block;
        }

        .cpi-image-container table {
            margin-top: 10px;
            width: 100%;
        }
    </style>
</head>
<body class="main-layout">
<!-- loader  -->
<div class="loader_bg">
    <div class="loader"><img src="images/loading.gif" alt="#" /></div>
</div>
<!-- end loader -->
<!-- header -->
<header>
    <!-- header inner -->
    <div class="header">
        <div class="row">
            <div class="col-xl-3 col-lg-3 col-md-3 col-sm-3 col logo_section">
                <div class="full">
                    <div class="center-desk">
                        <div class="logo">
                            <a href="index.html"><img src="images/menu_icon.png" alt="#" /></a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-xl-9 col-lg-9 col-md-9 col-sm-9">
                <nav class="navigation navbar navbar-expand-md navbar-dark ">
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExample04" aria-controls="navbarsExample04" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarsExample04">
                        <ul class="navbar-nav mr-auto">
                            <li class="nav-item">
                                <a class="nav-link" href="https://www.moa.gov.tw/">農業部 </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="https://www.dgbas.gov.tw/Default.aspx">行政院主計總處</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="https://price.naif.org.tw/query/QueryNow.aspx">畜產品價格查詢系統</a>
                            </li>
                        </ul>

                    </div>
                </nav>
            </div>
        </div>
    </div>
</header>

<section class="banner_main main-content">
    <div class="container">
        <div class="row d_flex">
            <div class="col-md-6">
                <div class="text-bg">
                    <h1>消費者物價基本分類指數(CPI)</h1>
                    <p>消費者物價基本分類指數（CPI）是衡量一籃子特定商品和服務的價格變動情況的指標。它反映消費者購買的食品、住房、交通、醫療等各類商品和服務的價格變動，常用來衡量通貨膨脹水平和消費者購買力的變化。CPI的變動是政府、企業和投資者制定經濟政策和決策的重要依據。</p>

                    <a class="read_more" href="https://www.dgbas.gov.tw/Default.aspx" target="_blank">Read more</a>
                </div>
            </div>
            <div class="col-md-6">
                <div class="cpi-images">
                    <div>
                        <img src="images/icon001.png" alt="#">
                        <p>經濟成長率</p>
                        <p>3.94%</p>
                        <a class="read_more" href="https://www.stat.gov.tw//Point.aspx?sid=t.1&n=3580&sms=11480">113年預測</a>
                    </div>
                    <div>
                        <img src="images/icon002.png" alt="#">
                        <p>消費者物價指數年增率</p>
                        <p>1.95%</p>
                        <a class="read_more" href="https://www.stat.gov.tw//Point.aspx?sid=t.2&n=3581&sms=11480">113年4月</a>
                    </div>
                    <div>
                        <img src="images/icon003.png" alt="#">
                        <p>失業率</p>
                        <p>3.36%</p>
                        <a class="read_more" href="https://www.stat.gov.tw//Point.aspx?sid=t.3&n=3582&sms=11480">113年4月</a>

                </div>
            </div>
                <div class="cpi-image-container">
                    <img src="images/CPI3.png" alt="#" />
                    <button class="food_btn" id="showCPIdata">顯示CPI資料</button>
                    <table class="food_table" id="CPI"></table>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- footer -->
<footer class="footer">
    <div class="container">
        <!-- footer content here -->
    </div>
</footer>

<!-- end banner -->
<!-- food -->
<div class="food main-content">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="titlepage">
                    <h2> <strong class="yellow"></strong>CPI指數成長的影響</h2>
                    <span>CPI（消費者物價指數）是一個衡量家庭購買商品和服務的平均價格變動的指標。當CPI指數上升時，表示整體物價水平上升，購買力下降。白肉雞、五花豬肉和雞蛋的價格上漲將直接影響CPI指數的變化，因為這些都是日常消費品。</span>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-4">
                <div class="food_box">
                    <i><img src="images/ck.jpg" alt="#"/></i>
                    <div class="food_box">
                        <img src="images/ck3.png" alt="#">
                       <p>試猜出今年白肉雞單位：元/公斤價格為何?</p>
                        <input type="range" class="priceRange" min="150" max="200" value="50" data-correct-price="192">
                        <p>猜測價格: <span class="guessPrice"></span> 元/公斤</p>
                        <button class="guessButton food_btn"></button>
                        <p class="guessResult"></p>
                    </div>
                    <p>白肉雞價格逐年上漲主要受供需關係、生產成本增加、疾病爆發、政策變化和全球市場因素等影響。隨著人口成長和消費水準提高，對白肉雞的需求增加，同時飼料、勞動力、能源和運輸
                        成本也在上升。此外，禽流感等疾病爆發和政府監管的變化也推高了養殖成本。綜合這些因素，導致白肉雞價格逐年上升。</p>
                    <button class="food_btn" id="showChicken">顯示雞肉資料</button>
                    <table class="food_table" id="chicken"></table>
                </div>
            </div>
            <div class="col-md-4">
                <div class="food_box">
                    <i><img src="images/pork.jpg" alt="#"/></i>
                    <div class="food_box">
                    <img src="images/pig3.png" alt="#">
                        <p>試猜出今年五花豬肉單位:元/公斤價格為何?</p>
                        <input type="range" class="priceRange" min="250" max="300" value="50" data-correct-price="288">
                        <p>猜測價格: <span class="guessPrice"></span> 元/公斤</p>
                        <button class="guessButton food_btn"></button>
                        <p class="guessResult"></p>
                    </div>
                    <p>以往豬肉價格在度過炎熱的夏季後會回跌，但據農業部統計數據，自2022月5月起，毛豬交易價格就維持每公斤80元以上，居高不下。2023年由於豬下痢疫情，導致豬隻育成率差，加上飼料價格節節攀升、進口豬上漲等因素，2023年8月豬價更是達到歷史新高，每公斤價格96.87元。
                        由於原物料飆漲，加上人工、電費齊揚，許多豬農不得不透過減養或關閉養豬場減少虧損。中央畜產會統計數據顯示，近年來豬隻養頭數連年下滑，從2019年5月546萬7684頭，降至2023年5月的524萬2261頭，養豬場數也從6999間減至5893間，市場供給雪上加霜。</p>
                    <button class="food_btn" id="showPork">顯示豬肉資料</button>
                    <table class="food_table" id="pork"></table>
                </div>
            </div>
            <div class="col-md-4">
                <div class="food_box">
                    <i><img src="images/food3.png" alt="#"/></i>
                    <div class="food_box">
                    <img src="images/egg4.png" alt="#">
                        <p>試猜出今年雞蛋單位:元/公斤價格為何?</p>
                        <input type="range" class="priceRange" min="0" max="100" value="" data-correct-price="81">
                        <p>猜測價格: <span class="guessPrice"></span>元/公斤</p>
                        <button class="guessButton food_btn"></button>
                        <p class="guessResult"></p>
                    </div>
                    <p>全球農業市場瞬息萬變，價格受多種因素影響。天氣條件直接影響農作物和畜牧業，極端天氣如乾旱、洪水和颱風會導致農產品減產，進而推高價格。疫病和病蟲害也會減少供給，導致價格上升。政府政策如補貼、進出口限制和環保規定，也會對價格產生重大影響。國際市場的供需變化和貿易緊張局勢則會影響進口農產品的價格。這些因素相互作用，導致全球農業市場價格的波動性。</p>
                    <button class="food_btn" id="showEgg">顯示蛋資料</button>
                    <table class="food_table" id="egg"></table>
                </div>
            </div>
        </div>
    </div>
</div>
<button class="toggle-button" onclick="toggleSidebar()">☰</button>
<div class="sidebar">
    <h2>用戶反饋</h2>
    <table class="feedback-table" id="feedbackTable">
        <thead>
        <tr>
            <th>名稱</th>
            <th>Email</th>
            <th>主題</th>
        </tr>
        </thead>
        <tbody>
        </tbody>
    </table>
    <div id="feedback-form">
        <h3>提交反饋</h3>
        <form id="form">
            <div class="form-group">
                <label for="name">名稱:</label>
                <input type="text" class="form-control" id="name" required>
            </div>
            <div class="form-group">
                <label for="email">Email:</label>
                <input type="email" class="form-control" id="email" required>
            </div>
            <div class="form-group">
                <label for="subject">主題</label>
                <input type="text" class="form-control" id="subject" required>
            </div>
            <button type="submit" class="btn btn-primary">提交</button>
        </form>
    </div>
</div>

<script>
    const feedbackTable = document.getElementById('feedbackTable').getElementsByTagName('tbody')[0];
    document.getElementById('form').addEventListener('submit', function (event) {
        event.preventDefault();
        const name = document.getElementById('name').value;
        const email = document.getElementById('email').value;
        const subject = document.getElementById('subject').value;

        const newRow = feedbackTable.insertRow();
        const nameCell = newRow.insertCell(0);
        const emailCell = newRow.insertCell(1);
        const subjectCell = newRow.insertCell(2);

        nameCell.textContent = name;
        emailCell.textContent = email;
        subjectCell.textContent = subject;

        document.getElementById('form').reset();
    });
</script>


<!--  footer -->
<footer>
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12">
                    <div class="copyright">
                        <p>© Github information Design by <a href="https://github.com/D1204504/CPI">D1204504</a></p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</footer>
<table id="data" class="feedback-table"></table>
<script>
const fetchButton = document.getElementById('showdata');
const quotesDiv = document.getElementById('quotes');

fetchButton.addEventListener('click', async () => {
const response = await fetch('/api/feedback');
const quotes = await response.json();
quotesDiv.innerText = JSON.stringify(quotes, null, 2);
});
</script>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>

<!-- end footer -->
<!-- Javascript files-->
<script src="js/jquery.min.js"></script>
<script src="js/popper.min.js"></script>
<script src="js/bootstrap.bundle.min.js"></script>
<script src="js/jquery-3.0.0.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/main.js"></script>
<script>
    function toggleSidebar() {
        document.querySelector('.sidebar').classList.toggle('open');
    }
</script>
<!-- sidebar -->
<script src="js/jquery.mCustomScrollbar.concat.min.js"></script>
<script src="js/custom.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.js"></script>
<script>
    document.querySelectorAll('.priceRange').forEach(item => {
        item.addEventListener('input', function () {
            const price = this.value;
            this.parentNode.querySelector('.guessPrice').textContent = price;
        });
    });
        document.addEventListener('DOMContentLoaded', function () {
        // 更新範圍滑塊值
        document.querySelectorAll('.priceRange').forEach(input => {
            input.addEventListener('input', function () {
                const guessPriceElement = this.nextElementSibling;
                guessPriceElement.textContent = this.value;
                const correctPrice = this.getAttribute('data-correct-price');

                const guessedPrice = this.value; // 定義 guessedPrice 變量

                const guessResultElement = this.parentNode.querySelector('.guessResult');
                if (guessedPrice === correctPrice) {
                    guessResultElement.textContent = "正確";
                } else {
                    guessResultElement.textContent = "正確價格為: " + correctPrice;
                }
            });
        });
    });
</script>

<script>
async function fetchData(url, tableId) {
try {
const response = await fetch(url);
const data = await response.json();
const table = document.getElementById(tableId);
table.innerHTML = `
<tr>
    <th>Date</th>
    <th>Price</th>
</tr>
${data.map(row => `
<tr>
    <td>${row.date}</td>
    <td>${row.price}</td>
</tr>
`).join('')}
`;
} catch (error) {
console.error('Error fetching data:', error);
}
}

async function fetchData(url, tableId) {
    try {
        const response = await fetch(url);
        const data = await response.json();
        const table = document.getElementById(tableId);
        table.innerHTML = `
<tr>
    <th>Date</th>
    <th>Price</th>
</tr>
${data.map(row => `
<tr>
    <td>${row.date}</td>
    <td>${row.price}</td>
</tr>
`).join('')}
`;
    } catch (error) {
        console.error('Error fetching data:', error);
    }
}

document.getElementById('showChicken').addEventListener('click', () => fetchData('http://localhost:3000/api/chicken',
'chicken'));
document.getElementById('showPork').addEventListener('click', () => fetchData('http://localhost:3000/api/pork',
'pork'));
document.getElementById('showEgg').addEventListener('click', () => fetchData('http://localhost:3000/api/egg', 'egg'));
document.getElementById('showCPIdata').addEventListener('click', () => fetchData('http://localhost:3000/api/CPI', 'CPI'));

    document.getElementById('showdata').addEventListener('click', async () => {
        const response = await fetch('http://localhost:3000/api/feedback');
        const data = await response.json();
        const table = document.getElementById('data');
        table.innerHTML = `
            <tr>
                <th>Subject</th>
                <th>Message</th>
                <th>Nickname</th>
            </tr>
            ${data.map(row => `
                <tr>
                    <td>${row.Subject}</td>
                    <td>${row.Message}</td>
                    <td>${row.Nickname}</td>
                </tr>
            `).join('')}
        `;
    });

    document.getElementById('feedback-form').addEventListener('submit', async (event) => {
        event.preventDefault();
        const formData = new FormData(event.target);
        const data = {
            subject: formData.get('subject'),
            content: formData.get('content'),
            nickname: formData.get('nickname'),
        };
        try {
            const response = await fetch('http://localhost:3000/api/feedback', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data),
            });
            if (response.ok) {
                document.getElementById('feedback-form').reset();
                loadMessages();
            } else {
                console.error('Failed to send feedback:', response.status, response.statusText);
            }
        } catch (error) {
            console.error('Error sending feedback:', error);
        }
    });


</script>
</body>
</html>
